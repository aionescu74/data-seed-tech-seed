<?php////////////////////////////////////////////////////////////////////////////////////////////////// THIS PAGE IS CALLED WITH require_once// -> with require_once variable valuess from main page are replaced with the ones from called script// -> so use project related unique names////error_reporting(E_ALL);//require_once("/home/intheory/public_html/connection.inc");//require_once("/home/intheory/public_html/seed/environment.inc");//require_once("/home/intheory/public_html/seed/xml_functions.inc");//require_once("/home/intheory/public_html/seed/messaging.inc");require_once("./connection.inc");require_once("./environment.inc");require_once("./xml_functions.inc");require_once("./messaging.inc");$SEED_URL = "https://in-theory.info/seed/";$sel_rapoarte = "SELECT *            FROM utile_rapoarte_xml             WHERE LENGTH(sendEmail) > 3;";//print $sel_rapoarte;$result_rapoarte  = $conn -> query($sel_rapoarte);while ($row_raport = $result_rapoarte ->fetch_object()){    $sendEmail           = $row_raport->sendEmail;    $id_raport          = $row_raport->id_raport;    $appCode            = $row_raport->appCode;    $denumire           = $row_raport->denumire;    $descriere          = $row_raport->descriere;    $criteriu_activare  = $row_raport->criteriu_activare;    $executie_lenta     = $row_raport->executie_lenta;    //$environment_sql    = $row_raport->environment;    $sql_conditie_min   = $row_raport->sql_conditie_min;    $sql_conditie_max   = $row_raport->sql_conditie_max;    $prioritate         = $row_raport->prioritate;    $sql_raport         = $row_raport->sql_raport;    $root_element_name  = $row_raport->xml_root_element_name;    $element_name       = $row_raport->xml_element_name;    $link_address       = $row_raport->link_address;    $link_id            = $row_raport->link_id;        $query  = $criteriu_activare;    $result = $conn -> query($query);    $row    = $result ->fetch_row();    $count  = $row[0];    $query  = $sql_conditie_min;    $result = $conn -> query($query);    $row    = $result ->fetch_row();    $conditie_min= $row[0];    $query  = $sql_conditie_max;    $result = $conn -> query($query);    $row    = $result ->fetch_row();    $conditie_max= $row[0];    ///////////////////////////////////////////////////    //                      CREMA    //////////////////////////////////////////////////    if($count < $conditie_min || $count > $conditie_max)    {        //$result1 = $conn -> query($sql_raport);        $xml = GetXMLfromQuery($conn, $sql_raport, $root_element_name, $element_name);        $proc = new XSLTProcessor();        $xslTabel = GetXSLTabel($root_element_name, $element_name, "", "", "", "");        $proc->importStyleSheet($xslTabel);        $xmlTabeljobReports = $proc->transformToXML($xml);        $subject = "[PRIO " . $prioritate . "] " . $denumire . ": " . $count;        $body    = "<html>                    <head>                    <meta http-equiv=\"Content-Type\" content=\"text/html; charset=utf-8\" />                    <style>                        #email-wrap {                            background: #151515;                            color: #FFF;                        }                        table.xml_table{                            width:99%;                            border: 1px solid #c0c0c0;                            border-collapse: collapse;                            text-align:left;                            background-color:#f0f8ff;                        }                        table.xml_table td{                            padding: 5px;                            font-size: 11px;                            border: 1px solid #c0c0c0;                        }                        table.xml_table tr:hover{                            background-color: #e6f2ff                        }                        table.xml_table th{                            background-color: #4CAF50;                            color: white;                            padding: 5px;                            font-size: 12px;                        }                    </style>                    </head>                    <body><br/>"                . "Report: <a target=\"_blank\" href=\"".$SEED_URL."raport_xml.php?app=".$appCode."&id=".$id_raport."\">" . $denumire . "</a><br/><br/>"                . "Description: ". $descriere . "<br/>"                . "<br/>" . $xmlTabeljobReports. "<br/><br/>"                . "</body></html>";        sendEmail($sendEmail, $subject, $body);                $okNok = 'OK';    }                        }